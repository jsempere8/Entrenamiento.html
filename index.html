
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Fuerza & Salud +40</title>
<style>
:root {
  --primary: #007aff;
  --bg: #1c1c1e;
  --card: #2c2c2e;
  --text: #ffffff;
  --text-dim: #a1a1a6;
  --accent: #34c759;
  --danger: #ff3b30;
  --gold: #ffcc00;
}
body {
  font-family: -apple-system, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 20px;
  line-height: 1.4;
}
h1, h2, h3 { font-weight: 700; margin-bottom: 8px; }
.badge { background: var(--primary); padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
.card {
  background: var(--card);
  padding: 20px;
  border-radius: 16px;
  margin-bottom: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.exercise-item {
  display: flex;
  flex-direction: column;
  padding: 15px 0;
  border-bottom: 1px solid #3a3a3c;
}
.exercise-image {
  width: 100%;
  max-width: 280px;
  height: auto;
  border-radius: 12px;
  margin-bottom: 12px;
  align-self: center;
  border: 1px solid #444;
}
.timer {
  font-size: 2.8rem;
  font-weight: bold;
  text-align: center;
  color: var(--primary);
  margin: 10px 0;
}
button {
  width: 100%;
  background: var(--primary);
  color: white;
  border: none;
  padding: 16px;
  border-radius: 14px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}
.btn-timer { background: transparent; border: 2px solid var(--primary); color: var(--primary); margin-top: 10px; }
.btn-save { background: var(--accent); margin-top: 15px; }
.btn-guide { background: #444; margin-top: 10px; font-size: 14px; padding: 10px; }
.history-item { 
  font-size: 13px; 
  color: var(--text-dim); 
  margin-bottom: 8px; 
  border-bottom: 1px solid #333; 
  padding-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.history-actions {
  display: flex;
  gap: 5px;
}
.btn-action-small {
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 11px;
  width: auto;
  font-weight: bold;
}
.btn-edit { background: #444; color: white; }
.btn-delete { background: var(--danger); color: white; }

select {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  background: #3a3a3c;
  color: white;
  border: none;
  font-size: 16px;
}
.routine-box { background: #3a3a3c; padding: 18px; border-radius: 12px; margin-top: 10px; border-left: 4px solid var(--primary); }
.next-day-box { background: rgba(255, 255, 255, 0.05); border: 1px dashed var(--text-dim); padding: 15px; border-radius: 12px; margin-top: 10px; }
.pulsaciones { color: var(--danger); font-weight: bold; font-size: 14px; display: block; margin-top: 8px; }
.checklist label { display: block; font-size: 14px; margin-bottom: 10px; color: var(--text); }
input[type="checkbox"] { transform: scale(1.3); margin-right: 10px; vertical-align: middle; }

#nutrition-guide { display: none; margin-top: 15px; padding: 15px; background: #1c1c1e; border-radius: 12px; border: 1px solid var(--primary); }
.food-group { margin-bottom: 12px; }
.food-group h4 { margin: 0; color: var(--gold); font-size: 14px; text-transform: uppercase; }
.food-group p { margin: 4px 0; font-size: 13px; color: var(--text-dim); }
</style>
</head>
<body>

<header>
  <span id="date-label" class="badge">Hoy</span>
  <h1 id="main-title">AppWeb entrenamientos</h1>
</header>

<div id="content-area"></div>

<div class="card">
  <h2>üìÖ Ma√±ana te toca...</h2>
  <div id="next-day-area" class="next-day-box"></div>
</div>

<div class="card">
  <h2>üìä Registro & Salud</h2>
  <div class="checklist" style="margin-bottom: 15px;">
    <p style="font-size: 13px; color: var(--accent); font-weight: bold;">LONGEVIDAD:</p>
    <label><input type="checkbox" id="nut-prot"> Prote√≠na (+1.6g/kg)</label>
    <label><input type="checkbox" id="nut-water"> Hidrataci√≥n (2.5L Agua)</label>
    <label><input type="checkbox" id="nut-omega"> Omega 3 / Grasas Saludables</label>
  </div>
  <select id="rpe-select">
    <option value="">¬øC√≥mo fue el esfuerzo (RPE)?</option>
    <option value="5">5 - Muy suave</option>
    <option value="6">6 - C√≥modo</option>
    <option value="7">7 - Moderado</option>
    <option value="8">8 - Dif√≠cil</option>
    <option value="9">9 - L√≠mite</option>
  </select>
  <button class="btn-save" onclick="completeWorkout()">Guardar Sesi√≥n</button>
  <button class="btn-guide" onclick="toggleGuide()">üí° Gu√≠a de Alimentos</button>
  <div id="nutrition-guide">
    <div class="food-group"><h4>üí™ Prote√≠nas</h4><p>Huevos, Pollo, Pescado, Yogur Griego, Queso Batido 0%.</p></div>
    <div class="food-group"><h4>ü•ë Grasas</h4><p>AOVE, Aguacate, Salm√≥n, Nueces, Semillas.</p></div>
    <div class="food-group"><h4>üçö Carbohidratos</h4><p>Avena, Arroz Integral, Patata, Fruta.</p></div>
  </div>
  <p id="msg" style="text-align: center; font-size: 14px; margin-top: 12px; font-weight: bold;"></p>
</div>

<div class="card">
  <h2>üìà Historial Semanal</h2>
  <div id="history-log"></div>
</div>

<script>
/* DATOS */
const exercises = [
  { name: "Sentadillas", img: "https://i.ibb.co/L5hY5M2/squat.gif" },
  { name: "Flexiones", img: "https://i.ibb.co/3Wqj2Bq/pushup.gif" },
  { name: "Zancadas", img: "https://i.ibb.co/Zc1yG0y/lunge.gif" },
  { name: "Plancha", img: "https://i.ibb.co/b3gYmP4/plank.gif" }
];

const sessions = { 
  lunes: "fuerza", martes: "aerobico", mi√©rcoles: "fuerza", jueves: "aerobico", 
  viernes: "fuerza_ligera", s√°bado: "monta√±a", domingo: "monta√±a" 
};

/* ESTADO */
let level = parseInt(localStorage.getItem("f_level") || "1");
let reps = parseInt(localStorage.getItem("f_reps") || "10");
let rounds = parseInt(localStorage.getItem("f_rounds") || "3");

const days = ["domingo", "lunes", "martes", "mi√©rcoles", "jueves", "viernes", "s√°bado"];
const todayDate = new Date();
const dayName = days[todayDate.getDay()];
const nextDayName = days[(todayDate.getDay() + 1) % 7];
const todayType = sessions[dayName] || "descanso";
const nextDayType = sessions[nextDayName] || "descanso";

let timerInterval;

function init() {
  document.getElementById('date-label').innerText = dayName;
  const area = document.getElementById('content-area');
  
  if (todayType.includes("fuerza")) {
    area.innerHTML = `
      <div class="card">
        <h2>üöÄ Fuerza: Nivel ${level}</h2>
        ${exercises.map(ex => `
          <div class="exercise-item">
            <img src="${ex.img}" class="exercise-image" loading="lazy">
            <div style="display:flex; justify-content:space-between; align-items:center; width:100%">
              <span><strong>${ex.name}</strong></span>
              <span class="badge" style="background:#444">${ex.name === 'Plancha' ? '30s' : reps + ' reps'}</span>
            </div>
          </div>
        `).join('')}
        <p style="color:var(--primary); margin-top:20px; font-weight:bold; text-align:center;">OBJETIVO: ${rounds} RONDAS</p>
      </div>
      <div class="card" style="text-align:center"><h2>‚è±Ô∏è Descanso</h2><div id="timer-display" class="timer">01:30</div><button class="btn-timer" onclick="startTimer()">Iniciar</button></div>`;
  } else if (todayType === "aerobico") {
    area.innerHTML = `<div class="card"><h2>üèÉ Aer√≥bico Hoy</h2><div class="routine-box"><h3>Actividad de 40 min</h3><p>Consulta las zonas en tu Apple Watch.</p></div></div>`;
  } else {
    area.innerHTML = `<div class="card"><h2>üßò Recuperaci√≥n/Monta√±a</h2><p>D√≠a para disfrutar o recuperar.</p></div>`;
  }

  const nextArea = document.getElementById('next-day-area');
  let nextInfo = nextDayType.includes("fuerza") ? `üí™ Fuerza Nivel ${level}` : nextDayType === "aerobico" ? `üèÉ Cardio 40 min` : `üßò Descanso/Monta√±a`;
  nextArea.innerHTML = `<p style="margin:0; font-size:14px;">Ma√±ana: ${nextInfo}</p>`;
  
  renderHistory();
}

function toggleGuide() {
  const guide = document.getElementById('nutrition-guide');
  guide.style.display = (guide.style.display === 'block') ? 'none' : 'block';
}

function startTimer() {
  clearInterval(timerInterval);
  let time = 90;
  const display = document.getElementById('timer-display');
  timerInterval = setInterval(() => {
    let m = Math.floor(time / 60); let s = time % 60;
    display.innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    if (--time < 0) { clearInterval(timerInterval); display.innerText = "¬°LISTO!"; }
  }, 1000);
}

function completeWorkout() {
  const rpe = document.getElementById('rpe-select').value;
  if(!rpe) return alert("Selecciona RPE");
  
  const record = { 
    id: Date.now(),
    date: new Date().toLocaleDateString('es-ES', {day: 'numeric', month: 'short'}), 
    type: todayType, 
    rpe: rpe 
  };

  let history = JSON.parse(localStorage.getItem('f_history') || "[]");
  history.unshift(record);
  localStorage.setItem('f_history', JSON.stringify(history.slice(0,7)));
  
  document.getElementById('msg').innerText = "‚úÖ ¬°Guardado!";
  setTimeout(() => { document.getElementById('msg').innerText = ""; init(); }, 1500);
}

function editRecord(id) {
  let history = JSON.parse(localStorage.getItem('f_history') || "[]");
  const record = history.find(r => r.id === id);
  const newType = prompt("Editar tipo (fuerza, aerobico, descanso):", record.type);
  const newRpe = prompt("Editar RPE (5-9):", record.rpe);
  
  if (newType !== null && newRpe !== null) {
    record.type = newType;
    record.rpe = newRpe;
    localStorage.setItem('f_history', JSON.stringify(history));
    renderHistory();
  }
}

function deleteRecord(id) {
  if (confirm("¬øEst√°s seguro de que quieres eliminar este registro?")) {
    let history = JSON.parse(localStorage.getItem('f_history') || "[]");
    history = history.filter(r => r.id !== id);
    localStorage.setItem('f_history', JSON.stringify(history));
    renderHistory();
  }
}

function renderHistory() {
  const log = JSON.parse(localStorage.getItem('f_history') || "[]");
  document.getElementById('history-log').innerHTML = log.map(h => `
    <div class="history-item">
      <div><strong>${h.date}</strong> - ${h.type.toUpperCase()} - RPE: ${h.rpe}</div>
      <div class="history-actions">
        <button class="btn-action-small btn-edit" onclick="editRecord(${h.id})">Editar</button>
        <button class="btn-action-small btn-delete" onclick="deleteRecord(${h.id})">Borrar</button>
      </div>
    </div>
  `).join('');
}

init();
</script>
</body>
</html>
